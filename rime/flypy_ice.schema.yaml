# flypy_ice.schema.yaml
schema:
  schema_id: flypy_ice
  name: "小鹤音形+雾凇"
  version: "1.0"

engine:
  translators:
    - table_translator

  # 词库配置：小鹤形码 + 雾凇
  translator/dictionary:
    - flypy_xing # 小鹤形码词库（必须在前）
    - rime_ice # 雾凇词库

  segmentors:
    - ascii_segmentor
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor

  # 小鹤双拼布局（不要改，这是小鹤音形的基础）
  speller:
    alphabet: "zyxwvutsrqponmlkjihgfedcba"
    delimiter: " "
    algebra:
      # 小鹤双拼编码规则（固定）
      - xform/^zh/v/
      - xform/^ch/i/
      - xform/^sh/u/
      - xform/^([bpmfdtnlgkhjqxzcsryw])o/$1o/
      # 形码后缀规则
      - derive/^([a-z]{2})([a-z]{1,2})$/$1$2/

  # 形码反查（与自然码方案保持一致的按键）
  reverse_lookup:
    dictionary: flypy_xing
    prefix: "`"
    tips: "〔小鹤形码〕"

  recognizer:
    patterns:
      reverse_lookup: "^`.*$"
